<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Photron areaDetector driver</title>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type" />
</head>
<body>
  <div style="text-align: center">
    <h1>
      Photron areaDetector driver</h1>
    <h2>
      April 5, 2016</h2>
    <h2>
      Kevin Peterson</h2>
    <h2>
      Argonne National Laboratory</h2>
  </div>
  <h2>
    Contents</h2>
  <ul>
    <li><a href="#Overview">Overview</a></li>
    <li><a href="#Differences">Differences from other cameras</a></li>
    <li><a href="#Modes">Operating Modes</a></li>
    <ul>
      <li><a href="#CamMode">Camera Mode</a></li>
      <li><a href="#AcqMode">Acquire Mode</a></li>
    </ul>
    <li><a href="#StandardNotes">Implementation of standard driver parameters</a></li>
    <li><a href="#Driver_parameters">Photron-specific parameters</a></li>
    <li><a href="#Configuration">Configuration</a></li>
    <li><a href="#MEDM_screens">MEDM screens</a></li>
    <li><a href="#ConnectionManagement">Connection management</a></li>
  </ul>
  <h2 id="Overview">
    Overview</h2>
  <p>
    This is an <a href="http://www.aps.anl.gov/epics/">EPICS</a> <a href="http://cars9.uchicago.edu/software/epics/areaDetector.html">
      areaDetector</a> driver for Gigabit Ethernet cameras from <a href="http://www.photron.com">
        Photron</a>. 
        The driver is supported under Windows using the 
        64-bit vendor library.
  </p>
  <p>
    This driver inherits from <a href="areaDetectorDoc.html#ADDriver">ADDriver</a>.
    It implements nearly all of the parameters in <a href="areaDetectorDoxygenHTML/asyn_n_d_array_driver_8h.html">
      asynNDArrayDriver.h</a> and in <a href="areaDetectorDoxygenHTML/_a_d_driver_8h.html">
        ADArrayDriver.h</a>. It also implements a number of parameters that are specific
    to Photron cameras. The Photron class documentation will describe this class in detail, but it doesn't yet exist.</p>
  <h2 id="Differences">
    Differences from other cameras</h2>
  <p>
    Photron cameras differ from the cameras for which areaDetector was designed.
  </p>
  <ul>
    <li>There are multiple modes of operating the camera, and the mode determines how some settings get their values</li>
    <li>Many camera settings are limited to a small list of acceptable values; this includes frame rate and resolution.</li>
    <li>Camera settings are frequently coupled; example: changing the frame rate sometimes changes the resolution.</li>
    <li>The standard acquistion mode involves recording images to the camera's internal memory and reading them out later.</li>
    <li>The readout time is much greater than the acquire time, so it is sometimes desirable to save a subset of images that were acquired.</li>
  </ul>
  <p>
    Some of the unique and important features of the vendor software have been implemented in the areaDetector support, despite not fitting naturally into the areaDetector model.  A non-trivial amount of code in the driver is dedicated to preventing invalid values from being sent to the camera.
  </p>
  <h2 id="Modes">
    Operating Modes</h2>
  <h3 id="CamMode">
    Camera mode</h3>
    <p>
      Camera mode determines how the record rate, resolution, and position are determined.
    </p>
    <table border="1" cellpadding="2" cellspacing="2" style="text-align: center">
      <tbody>
      <tr>
        <th>
          Mode
          </th>
        <th>
          Record Rate</th>
        <th>
          Resolution</th>
        <th>
          Position</th>
        <th>
          Flexibility</th>
        <th>
          Major Changes allowed</th>
      </tr>
      <tr>
        <td>
          Default</td>
        <td>
          Set by record rate PV</td>
        <td>
          Highest resolution automatically <br />
          selected for current record rate</td>
        <td>
          Fixed ROI position <br />
          (Center of sensor) </td>
        <td>
          Moderate</td>
        <td>
          On-the-fly </td>
      </tr>
      <tr>
        <td>
          Variable</td>
        <td>
          Set by record rate of <br />
          current variable channel</td>
        <td>
          Set by resolution of <br />
          current variable channel</td>
        <td>
          Set by position of <br />
          current variable channel*</td>
        <td>
          High</td>
        <td>
          When saving variable </br>
          channel settings</td>
      </tr>
      <tr>
        <td>
          External</td>
        <td>
          Set by frequency of <br />
          pulses on sync input</td>
        <td>
          Highest resolution automatically <br />
          selected for sync-pulse frequency</td>
        <td>
          Fixed ROI position <br />
          (Center of sensor)</td>
        <td>
          Minimal</td>
        <td>
          When external <br />
          mode is enabled</td>
      </tr>
      </tbody>
    </table>
    <p>
      * The degrees of freedom depend on the camera model.
    </p>
  <h3 id="AcqMode">
    Acquire mode</h3>
    <p>
      Acquire mode determines whether or not images are recorded to the internal
      memory of the camera before retrieval.
    </p>
    A camera in <b>live mode</b> behaves like most other areaDetectors:
  <ul>
    <li>Images are requested from the camera one-at-a-time.</li>
    <li>The PVs on the ADCollect screen, with the exception of TriggerMode,
        determine how the images are collected.</li>
    <li>The Acquire PV is used to initiate acquisition.</li>
    <li>Continuous acquistion will be much, much slower than the desired frame rate.</li>
  </ul>
    A camera in <b>record mode</b> behaves very differently than other areaDetectors:
  <ul>
    <li>Images are recorded to the internal memory of the camera.</li>
    <li>The PVs on the Trigger screen determine which & how many images are recorded.</li>
    <li>Many of the PVs on the ADCollect screen (AcquirePeriod, NumImages, NumExposures, ImageMode) are ignored.</li>
    <li>A trigger signal (software or hardware) initiates acquisition. The Acquire PV can be used, but only if the trigger mode results in a single recording.</li>
    <li>Acquisition occurs at the desired frame rate, but images are read from the camera much more slowly.</li>
  </ul>
  <!--h2 id="StandardNotes" style="text-align: left">
    Implementation of standard driver parameters</h2>
  <p>
    The driver redefines the choices for several of the parameters defined in ADDriver.h.
    The ADTriggerMode choices for the Prosilica are:
  </p>
  <ul>
    <li>Free Run (collects images as fast as allowed by the camera readout and the exposure
      time)</li>
    <li>Sync In 1 (external trigger on line 1)</li>
    <li>Sync In 2 (external trigger on line 2)</li>
    <li>Sync In 3 (external trigger on line 3)</li>
    <li>Sync In 4 (external trigger on line 4)</li>
    <li>Fixed Rate (collects images at a fixed rate)</li>
    <li>Software (single software trigger)</li>
  </ul>
  <p>
    The Prosilica supports hardware timing input and output signals that are supported
    in the driver.
  </p>
  <p>
    The NDDataType choices for the Prosilica are:
  </p>
  <ul>
    <li>NDUInt8 (8-bit data)</li>
    <li>NDUInt16 (12 or 16 bit data)</li>
  </ul>
  <p>
    The NDColorMode choices for the Prosilica are:
  </p>
  <ul>
    <li>NDColorModeMono (monochromatic data)</li>
    <li>NDColorModeBayer (raw Bayer data)</li>
    <li>NDColorModeRGB1 (RGB1 data)</li>
  </ul>
  <p>
    The color Prosilica cameras are also capable of various YUV color formats but these
    are not supported in the driver. They may be added in a future release.
  </p-->
  <h2 id="Driver_parameters" style="text-align: left">
    Photron-specific parameters</h2>
  <p>
    The Photron driver implements the following parameters in addition to those in
    asynNDArrayDriver.h and ADDriver.h:
  </p>
  <table border="1" cellpadding="2" cellspacing="2" style="text-align: left">
    <tbody>
      <tr>
        <td align="center" colspan="7,">
          <b>Parameter Definitions in Photron.cpp and EPICS Record Definitions in Photron.template</b>
        </td>
      </tr>
      <tr>
        <th>
          Parameter index variable</th>
        <th>
          asyn interface</th>
        <th>
          Access</th>
        <th>
          Description</th>
        <th>
          drvInfo string</th>
        <th>
          EPICS record name</th>
        <th>
          EPICS record type</th>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Operating Mode Parameters</b></td>
      </tr>
      <tr>
        <td>
          PhotronStatus</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          The status of the camera as an integer<br />
          See PDCValue.h for allowed values</td>
        <td>
          PHOTRON_STATUS</td>
        <td>
          $(P)$(R)Status_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronStatusName</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          The human-readable status of the camera</td>
        <td>
          PHOTRON_STATUS_NAME</td>
        <td>
          $(P)$(R)StatusName_RBV</td>
        <td>
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronCamMode</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          See <a href="#CamMode">camera-mode</a> section</td>
        <td>
          PHOTRON_CAM_MODE</td>
        <td>
          $(P)$(R)CamMode<br />
          $(P)$(R)CamMode_RBV</td>
        <td>
          mbbo<br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronAcquireMode</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          See <a href="#AcqMode">acquire-mode</a> section</td>
        <td>
          PHOTRON_ACQUIRE_MODE</td>
        <td>
          $(P)$(R)AcquireMode</td>
        <td>
          mbbo</td>
      </tr>
      <tr>
        <td>
          PhotronPreviewMode</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Enables (1) or disables (0) preview mode<br />
          Only applies when AcquireMode is "Record"</td>
        <td>
          PHOTRON_PREVIEW_MODE</td>
        <td>
          $(P)$(R)PreviewMode</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Acquisition Parameters</b></td>
      </tr>
      <tr>
        <td>
          PhotronRecordRate</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          The desired number of frames per second<br />
          A list of valid values is provided by the camera</td>
        <td>
          PHOTRON_REC_RATE</td>
        <td>
          $(P)$(R)RecordRate<br />
          $(P)$(R)RecordRate_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronChangeRecRate</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the record rate</td>
        <td>
          PHOTRON_CHANGE_REC_RATE</td>
        <td>
          $(P)$(R)ChangeRecRate</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronResIndex</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          The index for the current resolution<br />
          in the list of valid resolutions</td>
        <td>
          PHOTRON_RES_INDEX</td>
        <td>
          $(P)$(R)ResIdx<br />
          $(P)$(R)ResIdx_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronChangeResIdx</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the resolution index</td>
        <td>
          PHOTRON_CHANGE_RES_IDX</td>
        <td>
          $(P)$(R)ChangeResIdx</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronShutterFps</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          The shutter speed in Hz. A list of valid<br />
          speeds is provided by the camera</td>
        <td>
          PHOTRON_SHUTTER_FPS</td>
        <td>
          $(P)$(R)ShutterFps<br />
          $(P)$(R)ShutterFps_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronChangeShutterFps</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the shutter speed</td>
        <td>
          PHOTRON_CHANGE_SHUTTER_FPS</td>
        <td>
          $(P)$(R)ChangeShutterFps</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronJumpShutterFps</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Jumps to the maximum (1) or minimum (0) shutter speed</td>
        <td>
          PHOTRON_JUMP_SHUTTER_FPS</td>
        <td>
          $(P)$(R)JumpShutterFps</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronShadingMode</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Turning the shading mode off (0) and on (1)<br />
          performs the black-level calibration.</td>
        <td>
          PHOTRON_SHADING_MODE</td>
        <td>
          $(P)$(R)ShadingMode<br />
          $(P)$(R)ShadingMode_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Trigger parameters</b></td>
      </tr>
      <tr>
        <td>
          PhotronMaxFrames</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          The maximum number of frames that can be<br />
          saved in memory at the current resolution</td>
        <td>
          PHOTRON_MAX_FRAMES</td>
        <td>
          $(P)$(R)MaxFrames_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronAfterFrames</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Number of frames to record after the trigger is received</td>
        <td>
          PHOTRON_AFTER_FRAMES</td>
        <td>
          $(P)$(R)AfterFrames<br />
          $(P)$(R)AfterFrames_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronRandomFrames</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Total number of frames to record</td>
        <td>
          PHOTRON_RANDOM_FRAMES</td>
        <td>
          $(P)$(R)RandomFrames<br />
          $(P)$(R)RandomFrames_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronRecCount</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Number of recordings before camera automatically returns <br />
          to live mode. Limited to 10 when user-selectable.</td>
        <td>
          PHOTRON_REC_COUNT</td>
        <td>
          $(P)$(R)RecCount<br />
          $(P)$(R)RecCount_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronSoftTrig</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Initiates a recording when AcquireMode is "Record"<br />
          Is ignored when AcquireMode is "Live"</td>
        <td>
          PHOTRON_SOFT_TRIG</td>
        <td>
          $(P)$(R)SoftwareTrigger</td>
        <td>
          busy</td>
      </tr>
      <tr>
        <td>
          PhotronLiveMode</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Initiates playback for trigger modes w/ multiple recordings
          before the specified number of recordings has been reached.</td>
        <td>
          PHOTRON_LIVE_MODE</td>
        <td>
          $(P)$(R)LiveMode<br /></td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Readout parameters</b></td>
      </tr>
      <tr>
        <td>
          Photron8BitSelect</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          8-bit offset (only applies when when camera's dynamic<br />
          range is > 8 bits and DataType is "UInt8")</td>
        <td>
          PHOTRON_8_BIT_SEL</td>
        <td>
          $(P)$(R)8BitSel<br />
          $(P)$(R)8BitSel_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronBurstTrans</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Enable (1) or disable (0) burst-transfer mode<br />
          (increases max transfer speed & transfer speed variance)</td>
        <td>
          PHOTRON_BURST_TRANS</td>
        <td>
          $(P)$(R)BurstTransfer<br />
          $(P)$(R)BurstTransfer_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>I/O parameters</b></td>
      </tr>
      <tr>
        <td>
          PhotronExtIn1Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          External sync input</td>
        <td>
          PHOTRON_EXT_IN_1_SIG</td>
        <td>
          $(P)$(R)ExtIn1<br />
          $(P)$(R)ExtIn1_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronExtIn2Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          General input</td>
        <td>
          PHOTRON_EXT_IN_2_SIG</td>
        <td>
          $(P)$(R)ExtIn2<br />
          $(P)$(R)ExtIn2_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronExtIn3Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Trigger TTL input</td>
        <td>
          PHOTRON_EXT_IN_3_SIG</td>
        <td>
          $(P)$(R)ExtIn3<br />
          $(P)$(R)ExtIn3_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronExtIn4Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          N/A (present in SDK; missing from most cameras)</td>
        <td>
          PHOTRON_EXT_IN_4_SIG</td>
        <td>
          $(P)$(R)ExtIn4<br />
          $(P)$(R)ExtIn4_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronExtOut1Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          General output 1 (external sync output on some cameras)</td>
        <td>
          PHOTRON_EXT_OUT_1_SIG</td>
        <td>
          $(P)$(R)ExtOut1<br />
          $(P)$(R)ExtOut1_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronExtOut2Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          General output 2</td>
        <td>
          PHOTRON_EXT_OUT_2_SIG</td>
        <td>
          $(P)$(R)ExtOut2<br />
          $(P)$(R)ExtOut2_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronExtOut3Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          General output 3</td>
        <td>
          PHOTRON_EXT_OUT_3_SIG</td>
        <td>
          $(P)$(R)ExtOut3<br />
          $(P)$(R)ExtOut3_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronExtOut4Sig</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Trigger TTL output</td>
        <td>
          PHOTRON_EXT_OUT_4_SIG</td>
        <td>
          $(P)$(R)ExtOut4<br />
          $(P)$(R)ExtOut4_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronSyncPriority</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Defines relationship when using sync I/O features.<br />
          See PDCVALUE.h for allowed values.</td>
        <td>
          PHOTRON_SYNC_PRIORITY</td>
        <td>
          $(P)$(R)SyncPriority<br />
          $(P)$(R)SyncPriority_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td>
          PhotronSyncPulse</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Specifies the preferred polarity to be used <br />
          when external CamMode is selected.</td>
        <td>
          PHOTRON_SYNC_PULSE</td>
        <td>
          $(P)$(R)SyncPulse</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Timestamp parameters</b></td>
      </tr>
      <tr>
        <td>
          PhotronIRIG</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Enable (1) or Disable (0) the use of IRIG timecodes<br />
          when AcquireMode is "Record"</td>
        <td>
          PHOTRON_IRIG</td>
        <td>
          $(P)$(R)IRIG<br />
          $(P)$(R)IRIG_RBV</td>
        <td>
          bo
          <br />
          bi</td>
      </tr>
      <tr>
        <td>
          PhotronMemIRIGDay</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Day (of the year) from IRIG timecode for current frame</td>
        <td>
          PHOTRON_MEM_IRIG_DAY</td>
        <td>
          $(P)$(R)MemIRIGDay_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronMemIRIGHour</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Hour from IRIG timecode for current frame</td>
        <td>
          PHOTRON_MEM_IRIG_HOUR</td>
        <td>
          $(P)$(R)MemIRIGHour_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronMemIRIGMin</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Minute from IRIG timecode for current frame</td>
        <td>
          PHOTRON_MEM_IRIG_MIN</td>
        <td>
          $(P)$(R)MemIRIGMin_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronMemIRIGSec</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Second from IRIG timecode for current frame</td>
        <td>
          PHOTRON_MEM_IRIG_SEC</td>
        <td>
          $(P)$(R)MemIRIGSec_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronMemIRIGUsec</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Microsecond from IRIG timecode for current frame</td>
        <td>
          PHOTRON_MEM_IRIG_USEC</td>
        <td>
          $(P)$(R)MemIRIGUsec_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronMemIRIGSigEx</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Signal-exist flag from IRIG timecode for current frame</td>
        <td>
          PHOTRON_MEM_IRIG_SIGEX</td>
        <td>
          $(P)$(R)MemIRIGSigEx_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Variable Channel parameters</b></td>
      </tr>
      <tr>
        <td>
          PhotronVarChan</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Current variable channel (1-20)</td>
        <td>
          PHOTRON_VAR_CHAN</td>
        <td>
          $(P)$(R)Record<br />
          $(P)$(R)Record_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronChangeVarChan</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the current variable channel</td>
        <td>
          PHOTRON_CHANGE_VAR_CHAN</td>
        <td>
          $(P)$(R)ChangeVarChan</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanRate</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Record rate for the current variable channel</td>
        <td>
          PHOTRON_VAR_CHAN_RATE</td>
        <td>
          $(P)$(R)VarChanRate_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanXSize</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          ROI width for the current variable channel</td>
        <td>
          PHOTRON_VAR_CHAN_X_SIZE</td>
        <td>
          $(P)$(R)VarChanXSize_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanYSize</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          ROI height for the current variable channel</td>
        <td>
          PHOTRON_VAR_CHAN_Y_SIZE</td>
        <td>
          $(P)$(R)VarChanYSize_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanXPos</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          ROI horizontal position for the current variable channel</td>
        <td>
          PHOTRON_VAR_CHAN_X_POS</td>
        <td>
          $(P)$(R)VarChanXPos_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanYPos</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          ROI vertical position for the current variable channel</td>
        <td>
          PHOTRON_VAR_CHAN_Y_POS</td>
        <td>
          $(P)$(R)VarChanYPos_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanWStep</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Distance between valid widths for variable-channel editing</td>
        <td>
          PHOTRON_VAR_CHAN_W_STEP</td>
        <td>
          $(P)$(R)VarChanWStep_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanHStep</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Distance between valid heights for variable-channel editing</td>
        <td>
          PHOTRON_VAR_CHAN_H_STEP</td>
        <td>
          $(P)$(R)VarChanHStep_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanXPosStep</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Distance between valid horizontal positions for variable-channel editing</td>
        <td>
          PHOTRON_VAR_CHAN_X_POS_STEP</td>
        <td>
          $(P)$(R)VarChanXPosStep_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanYPosStep</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Distance between valid vertical positions for variable-channel editing</td>
        <td>
          PHOTRON_VAR_CHAN_Y_POS_STEP</td>
        <td>
          $(P)$(R)VarChanYPosStep_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanWMin</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Minimum width allowed for variable-channel editing</td>
        <td>
          PHOTRON_VAR_CHAN_W_MIN</td>
        <td>
          $(P)$(R)VarChanWMin_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanHMin</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Minimum height allowed for variable-channel editing</td>
        <td>
          PHOTRON_VAR_CHAN_H_MIN</td>
        <td>
          $(P)$(R)VarChanHMin_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanFreePos</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Flag indicating which dimensions allow positions to be changed<br />
          for variable-channel editing.  See PDCVALUE.h for possible values.</td>
        <td>
          PHOTRON_VAR_CHAN_FREE_POS</td>
        <td>
          $(P)$(R)VarChanFreePos_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanApply</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Save desired settings to the current variable channel</td>
        <td>
          PHOTRON_VAR_CHAN_APPLY</td>
        <td>
          $(P)$(R)VarChanApply</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronVarChanErase</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Erase settings of the current variable channel</td>
        <td>
          PHOTRON_VAR_CHAN_ERASE</td>
        <td>
          $(P)$(R)VarChanErase</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronVarEditRate</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Desired record rate for the current variable channel</td>
        <td>
          PHOTRON_VAR_EDIT_RATE</td>
        <td>
          $(P)$(R)VarChanRate</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronVarEditXSize</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Desired ROI width for the current variable channel</td>
        <td>
          PHOTRON_VAR_EDIT_X_SIZE</td>
        <td>
          $(P)$(R)VarChanXSize</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronVarEditYSize</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Desired ROI height for the current variable channel</td>
        <td>
          PHOTRON_VAR_EDIT_Y_SIZE</td>
        <td>
          $(P)$(R)VarChanYSize</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronVarEditXPos</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Desired ROI horizontal position for the current variable channel</td>
        <td>
          PHOTRON_VAR_EDIT_X_POS</td>
        <td>
          $(P)$(R)VarChanXPos</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronVarEditYPos</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Desired ROI vertical position for the current variable channel</td>
        <td>
          PHOTRON_VAR_EDIT_Y_POS</td>
        <td>
          $(P)$(R)VarChanYPos</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronVarEditMaxRes</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Set desired height and width to the largest square allowed<br />
          given the desired record rate for the current variable channel.</td>
        <td>
          PHOTRON_VAR_EDIT_MAX_RES</td>
        <td>
          $(P)$(R)VarChanMaxRes</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronChangeVarEditRate</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the desired record rate<br />
          for the current variable channel</td>
        <td>
          PHOTRON_CHANGE_VAR_EDIT_RATE</td>
        <td>
          $(P)$(R)ChangeVarEditRate</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronChangeVarEditXSize</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the desired width of the<br />
          current variable channel by the value of PhotronVarChanWStep</td>
        <td>
          PHOTRON_CHANGE_VAR_EDIT_X_SIZE</td>
        <td>
          $(P)$(R)ChangeVarEditXSize</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronChangeVarEditYSize</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the desired height of the<br />
          current variable channel by the value of PhotronVarChanHStep</td>
        <td>
          PHOTRON_CHANGE_VAR_EDIT_Y_SIZE</td>
        <td>
          $(P)$(R)ChangeVarEditYSize</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronChangeVarEditXPos</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increases (1) or decreases (0) the desired horizontal position of the<br />
          current variable channel by the value of PhotronVarChanXPosStep</td>
        <td>
          PHOTRON_CHANGE_VAR_EDIT_X_POS</td>
        <td>
          $(P)$(R)ChangeVarEditXPos</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronChangeVarEditYPos</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
           Increases (1) or decreases (0) the desired vertical position of the<br />
          current variable channel by the value of PhotronVarChanYPosStep</td>
        <td>
          PHOTRON_CHANGE_VAR_EDIT_Y_POS</td>
        <td>
          $(P)$(R)ChangeVarEditYPos<td>
          bo</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Preview Mode parameters</b></td>
      </tr>
      <tr>
        <td>
          PhotronFrameStart</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Index of the first frame of a recording</td>
        <td>
          PHOTRON_FRAME_START</td>
        <td>
          $(P)$(R)FrameStart_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronFrameEnd</td>
        <td>
          asynInt32</td>
        <td>
          r</td>
        <td>
          Index of the last frame of a recording</td>
        <td>
          PHOTRON_FRAME_END</td>
        <td>
          $(P)$(R)FrameEnd_RBV</td>
        <td>
          longin</td>
      </tr>
      <tr>
        <td>
          PhotronPMStart</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Index of the first frame of the preview range</td>
        <td>
          PHOTRON_PM_START</td>
        <td>
          $(P)$(R)PMStart</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronPMEnd</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Index of the last frame of the preview range</td>
        <td>
          PHOTRON_PM_END</td>
        <td>
          $(P)$(R)PMEnd</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronPMIndex</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Index of the current frame</td>
        <td>
          PHOTRON_PM_INDEX</td>
        <td>
          $(P)$(R)PMIndex</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronChangePMIndex</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Increase (1) or decrease (0) the index of the current frame by 1</td>
        <td>
          PHOTRON_CHANGE_PM_INDEX</td>
        <td>
          $(P)$(R)ChangePMIndex</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronPMFirst</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Jump to the first frame of the preview range</td>
        <td>
          PHOTRON_PM_FIRST</td>
        <td>
          $(P)$(R)PMFirst</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronPMLast</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Jump to the last frame of the preview range</td>
        <td>
          PHOTRON_PM_LAST</td>
        <td>
          $(P)$(R)PMLast</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronPMPlay</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Start (1) or stop (0) playing the preview range</td>
        <td>
          PHOTRON_PM_PLAY</td>
        <td>
          $(P)$(R)PMPlay</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronPMPlayRev</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Start (1) or stop (0) playing the preview range in reverse</td>
        <td>
          PHOTRON_PM_PLAY_REV</td>
        <td>
          $(P)$(R)PMPlayRev</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronPMSave</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Save the images in the preview range</td>
        <td>
          PHOTRON_PM_SAVE</td>
        <td>
          $(P)$(R)PMSave</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronPMCancel</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Exit preview mode without saving images in the preview range</td>
        <td>
          PHOTRON_PM_CANCEL</td>
        <td>
          $(P)$(R)PMCancel</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td>
          PhotronPMPlayFPS</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Updates per second during playback of the preview range</td>
        <td>
          PHOTRON_PM_PLAY_FPS</td>
        <td>
          $(P)$(R)PMPlayFPS</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronPMPlayMult</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Images per update during playback of the preview range</td>
        <td>
          PHOTRON_PM_PLAY_MULT</td>
        <td>
          $(P)$(R)PMPlayMult</td>
        <td>
          longout</td>
      </tr>
      <tr>
        <td>
          PhotronPMRepeat</td>
        <td>
          asynInt32</td>
        <td>
          w</td>
        <td>
          Enable (1) or disable (0) repeat during playback of the preview range</td>
        <td>
          PHOTRON_PM_REPEAT</td>
        <td>
          $(P)$(R)PMRepeat</td>
        <td>
          bo</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>Development parameters</b></td>
      </tr>
      <tr>
        <td>
          Test</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          A parameter used for testing during development.</td>
        <td>
          PHOTRON_TEST</td>
        <td>
          $(P)$(R)Test<br />
          $(P)$(R)Test_RBV</td>
        <td>
          longout
          <br />
          longin</td>
      </tr>
      <!-- STUFF TO COPY BELOW >
      <tr>
        <td>
          IndexVariable</td>
        <td>
          asynInt32</td>
        <td>
          r/w</td>
        <td>
          Description</td>
        <td>
          DRV_INFO_STRING</td>
        <td>
          $(P)$(R)Record<br />
          $(P)$(R)Record_RBV</td>
        <td>
          mbbo
          <br />
          mbbi</td>
      </tr>
      <tr>
        <td align="center" colspan="7,">
          <b>HEADING</b></td>
      </tr>
      STUFF TO COPY ABOVE -->
    </tbody>
  </table>
  <!-- KNOWN PROBLEMS -->
  <h2 id="Configuration">
    Configuration</h2>
  <p>
    The Photron driver is created with the PhotronConfig command, either from C/C++
    or from the EPICS IOC shell.</p>
  <pre>int PhotronConfig(char *portName,
                    const char* ipAddress, int autoDetect,
                    int maxBuffers, size_t maxMemory,
                    int priority, int stackSize)
  </pre>
  <p>
    The <b>ipAddress</b> string can be any of the following:</p>
  <ul>
    <li>The camera's IP address, e.g. 192.168.0.10</li>
    <li>The camera's IP DNS name, e.g. photron1.aps.anl.gov</li>
    <li>The CIDR routing prefix, e.g. 192.168.0.0, iff autoDetect is 1</li>
  </ul>
  <p>
    The IP address or IP DNS name can be used for cameras with fixed IP addresses, and
    <b>must</b> be used for cameras that are not on the local subnet.</p>
  <p>
    The maxBuffers parameter should be set to 2, at a minimum.  If file-saving plugins have blocking disabled, it may be necessary to increase this number significantly to prevent the loss of frames.
  </p>
  <p>
    For details on the meaning of the other parameters to this function refer to the
    detailed documentation on the PhotronConfig function in the <a href="areaDetectorDoxygenHTML/Photron_8cpp.html">
      Photron.cpp documentation</a> and in the documentation for the constructor for
    the <a href="areaDetectorDoxygenHTML/classPhotron.html">Photron class</a>.
  </p>
  <p>
    An example IOC is provided with this driver: <a href="https://github.com/kmpeters/ADPhotron/tree/master/iocs/photronIOC">photronIOC</a>
  </p>
  <h2 id="MEDM_screens" style="text-align: left">
    MEDM screens</h2>
  <p>
    The following is the main MEDM screen for Photron cameras.
  </p>
  <div style="text-align: center">
    <h3>
      Photron.adl</h3>
    <img alt="Photron.png" src="Photron.png" /></div>
  <p>
   The list of trigger modes is dynamic.  The mbbo/mbbi record enumerations are only read when the MEDM screen is launched, so a separate adl was created to select the trigger mode.
  </p>
  <div style="text-align: center">
    <h3>
      PhotronTrigSelect.adl</h3>
    <img alt="PhotronTrigSelect.png" src="PhotronTrigSelect.png" /></div>
  <p>
   When preview mode is on and the camera is in playback mode, the green "Slider" button from the main screen launches playback controls that provide similar functionality to the PFV software from Photron.
  </p>
  <div style="text-align: center">
    <h3>
      PhotronPlaybackControls.adl</h3>
    <img alt="PhotronPlaybackControls.png" src="PhotronPlaybackControls.png" /></div>
  <p>
   The limits of the MEDM slider widget only update when an adl is launched, so the preview controls reside on separate display, accessible by clicking the green "Done" button on the playback controls screen.
  </p>
  <div style="text-align: center">
    <h3>
      PhotronPreviewControls.adl</h3>
    <img alt="PhotronPreviewControls.png" src="PhotronPreviewControls.png" /></div>
  <p>
   PhotronMemIRIG.adl was used during development to see that the IRIG timecode info was being read properly without having to look at data files.  It isn't obvious that this is a useful screen.
  </p>
  <div style="text-align: center">
    <h3>
      PhotronMemIRIG.adl</h3>
    <img alt="PhotronMemIRIG.png" src="PhotronMemIRIG.png" /></div>
  <!--h2 id="ConnectionManagement">
    Connection management</h2>
  <p>
    The Prosilica driver implements connection management. Cameras do not need to be
    accessible when the IOC starts up, and can be power-cycled or disconnected and reconnected
    from the Ethernet without restarting the IOC.</p>
  <p>
    Whenever a new camera is detected on the network the Prosilica library issues a
    callback to the driver. If the driver is not currently connected to a camera it
    will attempt to connect when receiving the callback. This mechanism should work
    no matter how the camera is identified in the startup script, i.e. by Unique ID,
    IP address, or IP name. It is also possible to manually connect and disconnect the
    camera by using the $(P)$(R)AsynIO.CNCT PV, which is labeled "Connect" and "Disconnect"
    on the medm screen.</p>
  <p>
    If the camera is not accessible when the IOC boots, or is power-cycled then the
    EPICS output records may not match the actual camera settings and readbacks. They
    can be made to agree by processing the output record, e.g. by pressing Enter or
    Return in the medm output widget. In the future this may be improved by sending
    all of the EPICS settings to the camera when it connects, though it is not clear
    if this would always be the desired behavior.
  </p-->
</body>
</html>
